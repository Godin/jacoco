on:
  - push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: test
        uses: addnab/docker-run-action@v3
        with:
          image: mingc/android-build-box
          options: -v ${{ github.workspace }}:/project
          run: |
            sdkmanager "system-images;android-24;default;armeabi-v7a"
            echo "no" | avdmanager create avd \
              -n test \
              -k "system-images;android-24;default;armeabi-v7a" \
              -c 100M \
              --force
            $ANDROID_HOME/emulator/emulator -avd test -no-skin -no-audio -no-window -no-boot-anim -gpu off &
            sleep 30
            adb devices
